CREATE TABLE "HCLAB"."SABA_DASHBOARD"
  (
    "NOLAB"     VARCHAR2(20 BYTE) DEFAULT 'N' NOT NULL ENABLE,
    "FLAGSTATUS" VARCHAR2(1 BYTE) DEFAULT 'N' NOT NULL ENABLE,
    "TGLSELESAI" DATE
  )
  SEGMENT CREATION IMMEDIATE PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT
  )
  TABLESPACE "HCLAB" ;

CREATE TABLE "NOMOR_SIKOM" 
   (	"USER" VARCHAR(15),
        "NOMOR" NUMBER(3,0),
        "ANTRIAN" NUMBER(3,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "HCLAB" ;

CREATE TABLE "ANTRIAN_SIKOM" 
   (	"LOKET" VARCHAR2(15 BYTE),
        "ANTRIAN" NUMBER(3,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "HCLAB" ;

create or replace
TRIGGER "HCLAB".ORDERSABA
AFTER INSERT OR UPDATE OF OH_TNO ON ORD_HDR FOR EACH ROW 
DECLARE 
 v_ono ord_hdr.oh_tno%TYPE;  
BEGIN 
  BEGIN
  INSERT INTO SABA_DASHBOARD(NOLAB,FLAGSTATUS,TGLSELESAI) 
  VALUES(:NEW.OH_TNO,'O',:NEW.OH_TRX_DT);
  END;
END;

create or replace
TRIGGER "HCLAB".CEKINSABA
AFTER INSERT OR UPDATE OF OS_SPL_RCVDT ON ORD_SPL FOR EACH ROW 
BEGIN 
  UPDATE SABA_DASHBOARD SET
    FLAGSTATUS='P',
    TGLSELESAI=:NEW.OS_SPL_RCVDT
  WHERE NOLAB=:NEW.OS_TNO; 
END;

create or replace
TRIGGER "HCLAB".PRINTSABA
AFTER INSERT OR UPDATE OF OH_LAST_PRINT ON ORD_HDR FOR EACH ROW 
BEGIN 
  UPDATE SABA_DASHBOARD SET
    FLAGSTATUS='S',
    TGLSELESAI=:NEW.OH_LAST_PRINT
  WHERE NOLAB=:NEW.OH_TNO;
END;
